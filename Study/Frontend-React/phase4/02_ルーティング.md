# Phase 4-2: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

## å­¦ç¿’ç›®æ¨™

ã“ã®å˜å…ƒã‚’çµ‚ãˆã‚‹ã¨ã€ä»¥ä¸‹ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š

- React Router ã§ãƒšãƒ¼ã‚¸é·ç§»ã‚’å®Ÿè£…ã§ãã‚‹
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»˜ããƒ«ãƒ¼ãƒˆã‚’ä½¿ãˆã‚‹
- èªè¨¼ã‚¬ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã§ãã‚‹

## React Router

```bash
npm install react-router-dom
```

## åŸºæœ¬çš„ãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

```tsx
// src/main.tsx
import { BrowserRouter } from 'react-router-dom';
import App from './App';

ReactDOM.createRoot(document.getElementById('root')!).render(
    <BrowserRouter>
        <App />
    </BrowserRouter>
);
```

```tsx
// src/App.tsx
import { Routes, Route, Link } from 'react-router-dom';

function Home() {
    return <h1>Home</h1>;
}

function About() {
    return <h1>About</h1>;
}

function App() {
    return (
        <div>
            <nav>
                <Link to="/">Home</Link>
                <Link to="/about">About</Link>
            </nav>
            
            <Routes>
                <Route path="/" element={<Home />} />
                <Route path="/about" element={<About />} />
            </Routes>
        </div>
    );
}
```

## ãƒãƒ³ã‚ºã‚ªãƒ³

### æ¼”ç¿’1: åŸºæœ¬ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

```tsx
// src/pages/Home.tsx
function Home() {
    return (
        <div style={{ padding: '20px' }}>
            <h1>ğŸ  ãƒ›ãƒ¼ãƒ </h1>
            <p>Welcome to our website!</p>
        </div>
    );
}
export default Home;

// src/pages/Products.tsx
function Products() {
    return (
        <div style={{ padding: '20px' }}>
            <h1>ğŸ“¦ å•†å“ä¸€è¦§</h1>
            <p>Our products will be displayed here.</p>
        </div>
    );
}
export default Products;

// src/pages/Contact.tsx
function Contact() {
    return (
        <div style={{ padding: '20px' }}>
            <h1>ğŸ“§ ãŠå•ã„åˆã‚ã›</h1>
            <p>Contact us!</p>
        </div>
    );
}
export default Contact;
```

```tsx
// src/components/Navbar.tsx
import { Link, useLocation } from 'react-router-dom';

function Navbar() {
    const location = useLocation();
    
    const linkStyle = (path: string) => ({
        padding: '10px 20px',
        textDecoration: 'none',
        color: location.pathname === path ? '#007bff' : '#333',
        borderBottom: location.pathname === path ? '2px solid #007bff' : 'none'
    });
    
    return (
        <nav style={{ 
            display: 'flex', 
            gap: '10px',
            padding: '10px',
            borderBottom: '1px solid #ddd'
        }}>
            <Link to="/" style={linkStyle('/')}>ãƒ›ãƒ¼ãƒ </Link>
            <Link to="/products" style={linkStyle('/products')}>å•†å“</Link>
            <Link to="/contact" style={linkStyle('/contact')}>ãŠå•ã„åˆã‚ã›</Link>
        </nav>
    );
}
export default Navbar;
```

```tsx
// src/App.tsx
import { Routes, Route } from 'react-router-dom';
import Navbar from './components/Navbar';
import Home from './pages/Home';
import Products from './pages/Products';
import Contact from './pages/Contact';

function App() {
    return (
        <div>
            <Navbar />
            <Routes>
                <Route path="/" element={<Home />} />
                <Route path="/products" element={<Products />} />
                <Route path="/contact" element={<Contact />} />
            </Routes>
        </div>
    );
}
export default App;
```

### æ¼”ç¿’2: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä»˜ããƒ«ãƒ¼ãƒˆ

```tsx
// src/pages/ProductDetail.tsx
import { useParams, Link } from 'react-router-dom';

const products = [
    { id: 1, name: 'iPhone', price: 99800 },
    { id: 2, name: 'MacBook', price: 198000 },
    { id: 3, name: 'iPad', price: 69800 },
];

function ProductDetail() {
    const { id } = useParams<{ id: string }>();
    const product = products.find(p => p.id === Number(id));
    
    if (!product) {
        return (
            <div style={{ padding: '20px' }}>
                <h1>å•†å“ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</h1>
                <Link to="/products">å•†å“ä¸€è¦§ã«æˆ»ã‚‹</Link>
            </div>
        );
    }
    
    return (
        <div style={{ padding: '20px' }}>
            <Link to="/products">â† æˆ»ã‚‹</Link>
            <h1>{product.name}</h1>
            <p style={{ fontSize: '24px' }}>Â¥{product.price.toLocaleString()}</p>
            <button style={{
                padding: '10px 20px',
                backgroundColor: '#007bff',
                color: 'white',
                border: 'none',
                borderRadius: '4px'
            }}>
                ã‚«ãƒ¼ãƒˆã«è¿½åŠ 
            </button>
        </div>
    );
}
export default ProductDetail;
```

```tsx
// src/pages/Products.tsx
import { Link } from 'react-router-dom';

const products = [
    { id: 1, name: 'iPhone', price: 99800 },
    { id: 2, name: 'MacBook', price: 198000 },
    { id: 3, name: 'iPad', price: 69800 },
];

function Products() {
    return (
        <div style={{ padding: '20px' }}>
            <h1>ğŸ“¦ å•†å“ä¸€è¦§</h1>
            <div style={{ display: 'grid', gap: '16px' }}>
                {products.map(product => (
                    <Link 
                        key={product.id}
                        to={`/products/${product.id}`}
                        style={{
                            display: 'block',
                            padding: '16px',
                            border: '1px solid #ddd',
                            borderRadius: '8px',
                            textDecoration: 'none',
                            color: 'inherit'
                        }}
                    >
                        <h3>{product.name}</h3>
                        <p>Â¥{product.price.toLocaleString()}</p>
                    </Link>
                ))}
            </div>
        </div>
    );
}
export default Products;
```

```tsx
// App.tsx ã«ãƒ«ãƒ¼ãƒˆè¿½åŠ 
<Route path="/products/:id" element={<ProductDetail />} />
```

### æ¼”ç¿’3: ãƒã‚¹ãƒˆãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

```tsx
// src/pages/Dashboard.tsx
import { Routes, Route, Link, Outlet } from 'react-router-dom';

function DashboardLayout() {
    return (
        <div style={{ display: 'flex' }}>
            <nav style={{ width: '200px', padding: '20px', borderRight: '1px solid #ddd' }}>
                <h3>Dashboard</h3>
                <ul style={{ listStyle: 'none', padding: 0 }}>
                    <li><Link to="/dashboard">æ¦‚è¦</Link></li>
                    <li><Link to="/dashboard/profile">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</Link></li>
                    <li><Link to="/dashboard/settings">è¨­å®š</Link></li>
                </ul>
            </nav>
            <main style={{ flex: 1, padding: '20px' }}>
                <Outlet />  {/* å­ãƒ«ãƒ¼ãƒˆãŒã“ã“ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° */}
            </main>
        </div>
    );
}

function DashboardHome() {
    return <h2>ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ¦‚è¦</h2>;
}

function Profile() {
    return <h2>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®š</h2>;
}

function Settings() {
    return <h2>ã‚¢ãƒ—ãƒªè¨­å®š</h2>;
}

export { DashboardLayout, DashboardHome, Profile, Settings };
```

```tsx
// App.tsx
<Route path="/dashboard" element={<DashboardLayout />}>
    <Route index element={<DashboardHome />} />
    <Route path="profile" element={<Profile />} />
    <Route path="settings" element={<Settings />} />
</Route>
```

### æ¼”ç¿’4: èªè¨¼ã‚¬ãƒ¼ãƒ‰

```tsx
// src/components/ProtectedRoute.tsx
import { Navigate, useLocation } from 'react-router-dom';

interface ProtectedRouteProps {
    children: React.ReactNode;
    isAuthenticated: boolean;
}

function ProtectedRoute({ children, isAuthenticated }: ProtectedRouteProps) {
    const location = useLocation();
    
    if (!isAuthenticated) {
        // ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼ˆå…ƒã®URLã‚’ä¿å­˜ï¼‰
        return <Navigate to="/login" state={{ from: location }} replace />;
    }
    
    return <>{children}</>;
}
export default ProtectedRoute;
```

```tsx
// App.tsx
function App() {
    const [isAuthenticated, setIsAuthenticated] = useState(false);
    
    return (
        <Routes>
            <Route path="/" element={<Home />} />
            <Route 
                path="/login" 
                element={<Login onLogin={() => setIsAuthenticated(true)} />} 
            />
            <Route
                path="/dashboard/*"
                element={
                    <ProtectedRoute isAuthenticated={isAuthenticated}>
                        <DashboardLayout />
                    </ProtectedRoute>
                }
            >
                <Route index element={<DashboardHome />} />
            </Route>
        </Routes>
    );
}
```

## ç†è§£åº¦ç¢ºèª

### å•é¡Œ

React Router ã§URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ãƒ•ãƒƒã‚¯ã¯ã©ã‚Œã‹ã€‚

**A.** useLocation

**B.** useParams

**C.** useNavigate

**D.** useSearchParams

---

### è§£ç­”ãƒ»è§£èª¬

**æ­£è§£: B**

```tsx
// /products/:id ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—
const { id } = useParams<{ id: string }>();
```

å„ãƒ•ãƒƒã‚¯ã®å½¹å‰²ï¼š
- `useLocation`: ç¾åœ¨ã®URLæƒ…å ±
- `useParams`: URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
- `useNavigate`: ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§é·ç§»
- `useSearchParams`: ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å­¦ã³ã¾ã—ãŸã€‚æ¬¡ã¯çŠ¶æ…‹ç®¡ç†ã‚’å­¦ã³ã¾ã—ã‚‡ã†ã€‚

**æ¬¡ã®å˜å…ƒ**: [Phase 5-1: çŠ¶æ…‹ç®¡ç†](../phase5/01_çŠ¶æ…‹ç®¡ç†.md)
