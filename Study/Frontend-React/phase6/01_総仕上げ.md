# Phase 6-1: ç·ä»•ä¸Šã’ ï½ ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒª ï½

## å­¦ç¿’ç›®æ¨™

ã“ã®å˜å…ƒã‚’çµ‚ãˆã‚‹ã¨ã€ä»¥ä¸‹ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼š

- æœ¬ç•ªãƒ¬ãƒ™ãƒ«ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ—ãƒªã‚’æ§‹ç¯‰ã§ãã‚‹
- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ API ã¨é€£æºã§ãã‚‹
- å­¦ã‚“ã æŠ€è¡“ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ãˆã‚‹

## ç·åˆæ¼”ç¿’: ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒª

### è¦ä»¶

```
- ã‚¿ã‚¹ã‚¯ã® CRUD æ“ä½œ
- ã‚«ãƒ†ã‚´ãƒªã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- èªè¨¼æ©Ÿèƒ½
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
```

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- React + TypeScript
- React Router
- TanStack Query
- Zustand
- React Hook Form + Zod

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
task-manager/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ tasks.ts
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ TaskList.tsx
â”‚   â”‚   â”œâ”€â”€ TaskForm.tsx
â”‚   â”‚   â””â”€â”€ TaskItem.tsx
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ Home.tsx
â”‚   â”‚   â”œâ”€â”€ Login.tsx
â”‚   â”‚   â””â”€â”€ Dashboard.tsx
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â””â”€â”€ authStore.ts
â”‚   â”œâ”€â”€ App.tsx
â”‚   â””â”€â”€ main.tsx
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.ts
```

### API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

```typescript
// src/api/client.ts
const API_BASE = 'http://localhost:8000/api';

export async function apiClient<T>(
    endpoint: string,
    options: RequestInit = {}
): Promise<T> {
    const token = localStorage.getItem('token');
    
    const response = await fetch(`${API_BASE}${endpoint}`, {
        ...options,
        headers: {
            'Content-Type': 'application/json',
            ...(token && { Authorization: `Bearer ${token}` }),
            ...options.headers,
        },
    });
    
    if (!response.ok) {
        if (response.status === 401) {
            localStorage.removeItem('token');
            window.location.href = '/login';
        }
        throw new Error(`API Error: ${response.status}`);
    }
    
    return response.json();
}
```

```typescript
// src/api/tasks.ts
import { apiClient } from './client';

export interface Task {
    id: number;
    title: string;
    description: string;
    status: 'pending' | 'in_progress' | 'completed';
    category: string;
    dueDate: string | null;
    createdAt: string;
}

export interface CreateTaskInput {
    title: string;
    description?: string;
    category?: string;
    dueDate?: string;
}

export const tasksApi = {
    getAll: () => apiClient<Task[]>('/tasks'),
    
    getById: (id: number) => apiClient<Task>(`/tasks/${id}`),
    
    create: (data: CreateTaskInput) =>
        apiClient<Task>('/tasks', {
            method: 'POST',
            body: JSON.stringify(data),
        }),
    
    update: (id: number, data: Partial<Task>) =>
        apiClient<Task>(`/tasks/${id}`, {
            method: 'PATCH',
            body: JSON.stringify(data),
        }),
    
    delete: (id: number) =>
        apiClient<void>(`/tasks/${id}`, { method: 'DELETE' }),
};
```

### èªè¨¼ã‚¹ãƒˆã‚¢

```typescript
// src/stores/authStore.ts
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

interface User {
    id: number;
    name: string;
    email: string;
}

interface AuthState {
    user: User | null;
    token: string | null;
    login: (email: string, password: string) => Promise<void>;
    logout: () => void;
    isAuthenticated: boolean;
}

export const useAuthStore = create<AuthState>()(
    persist(
        (set) => ({
            user: null,
            token: null,
            isAuthenticated: false,
            
            login: async (email, password) => {
                const response = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email, password }),
                });
                
                if (!response.ok) throw new Error('Login failed');
                
                const { user, token } = await response.json();
                localStorage.setItem('token', token);
                set({ user, token, isAuthenticated: true });
            },
            
            logout: () => {
                localStorage.removeItem('token');
                set({ user: null, token: null, isAuthenticated: false });
            },
        }),
        { name: 'auth-storage' }
    )
);
```

### ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```tsx
// src/components/TaskList.tsx
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { useState } from 'react';
import { tasksApi, Task } from '../api/tasks';
import TaskItem from './TaskItem';
import TaskForm from './TaskForm';

function TaskList() {
    const [filter, setFilter] = useState<string>('all');
    const [showForm, setShowForm] = useState(false);
    const queryClient = useQueryClient();
    
    const { data: tasks, isLoading, error } = useQuery({
        queryKey: ['tasks'],
        queryFn: tasksApi.getAll,
    });
    
    const deleteMutation = useMutation({
        mutationFn: tasksApi.delete,
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ['tasks'] });
        },
    });
    
    const updateMutation = useMutation({
        mutationFn: ({ id, data }: { id: number; data: Partial<Task> }) =>
            tasksApi.update(id, data),
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ['tasks'] });
        },
    });
    
    if (isLoading) return <div>Loading...</div>;
    if (error) return <div>Error loading tasks</div>;
    
    const filteredTasks = tasks?.filter(task => {
        if (filter === 'all') return true;
        return task.status === filter;
    });
    
    return (
        <div style={{ padding: '20px' }}>
            <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '20px' }}>
                <h2>ã‚¿ã‚¹ã‚¯ä¸€è¦§</h2>
                <button onClick={() => setShowForm(true)}>+ æ–°è¦ã‚¿ã‚¹ã‚¯</button>
            </div>
            
            <div style={{ marginBottom: '16px' }}>
                <select value={filter} onChange={(e) => setFilter(e.target.value)}>
                    <option value="all">ã™ã¹ã¦</option>
                    <option value="pending">æœªç€æ‰‹</option>
                    <option value="in_progress">é€²è¡Œä¸­</option>
                    <option value="completed">å®Œäº†</option>
                </select>
            </div>
            
            <div style={{ display: 'grid', gap: '12px' }}>
                {filteredTasks?.map(task => (
                    <TaskItem
                        key={task.id}
                        task={task}
                        onDelete={() => deleteMutation.mutate(task.id)}
                        onStatusChange={(status) =>
                            updateMutation.mutate({ id: task.id, data: { status } })
                        }
                    />
                ))}
            </div>
            
            {showForm && (
                <TaskForm onClose={() => setShowForm(false)} />
            )}
        </div>
    );
}

export default TaskList;
```

### ã‚¿ã‚¹ã‚¯ã‚¢ã‚¤ãƒ†ãƒ 

```tsx
// src/components/TaskItem.tsx
import { Task } from '../api/tasks';

interface TaskItemProps {
    task: Task;
    onDelete: () => void;
    onStatusChange: (status: Task['status']) => void;
}

function TaskItem({ task, onDelete, onStatusChange }: TaskItemProps) {
    const statusColors = {
        pending: '#ffc107',
        in_progress: '#17a2b8',
        completed: '#28a745',
    };
    
    return (
        <div style={{
            padding: '16px',
            border: '1px solid #ddd',
            borderRadius: '8px',
            borderLeft: `4px solid ${statusColors[task.status]}`
        }}>
            <div style={{ display: 'flex', justifyContent: 'space-between' }}>
                <h3 style={{ margin: 0 }}>{task.title}</h3>
                <select
                    value={task.status}
                    onChange={(e) => onStatusChange(e.target.value as Task['status'])}
                >
                    <option value="pending">æœªç€æ‰‹</option>
                    <option value="in_progress">é€²è¡Œä¸­</option>
                    <option value="completed">å®Œäº†</option>
                </select>
            </div>
            {task.description && (
                <p style={{ color: '#666', margin: '8px 0' }}>{task.description}</p>
            )}
            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                <span style={{ fontSize: '12px', color: '#999' }}>
                    {task.category && `ğŸ“ ${task.category}`}
                </span>
                <button onClick={onDelete} style={{ color: 'red' }}>å‰Šé™¤</button>
            </div>
        </div>
    );
}

export default TaskItem;
```

### ã‚¿ã‚¹ã‚¯ãƒ•ã‚©ãƒ¼ãƒ 

```tsx
// src/components/TaskForm.tsx
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';
import { useMutation, useQueryClient } from '@tanstack/react-query';
import { tasksApi, CreateTaskInput } from '../api/tasks';

const schema = z.object({
    title: z.string().min(1, 'ã‚¿ã‚¤ãƒˆãƒ«ã¯å¿…é ˆã§ã™'),
    description: z.string().optional(),
    category: z.string().optional(),
    dueDate: z.string().optional(),
});

interface TaskFormProps {
    onClose: () => void;
}

function TaskForm({ onClose }: TaskFormProps) {
    const queryClient = useQueryClient();
    const { register, handleSubmit, formState: { errors } } = useForm<CreateTaskInput>({
        resolver: zodResolver(schema),
    });
    
    const mutation = useMutation({
        mutationFn: tasksApi.create,
        onSuccess: () => {
            queryClient.invalidateQueries({ queryKey: ['tasks'] });
            onClose();
        },
    });
    
    return (
        <div style={{
            position: 'fixed',
            top: 0,
            left: 0,
            right: 0,
            bottom: 0,
            backgroundColor: 'rgba(0,0,0,0.5)',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center'
        }}>
            <form
                onSubmit={handleSubmit((data) => mutation.mutate(data))}
                style={{
                    backgroundColor: 'white',
                    padding: '24px',
                    borderRadius: '8px',
                    width: '400px'
                }}
            >
                <h3>æ–°è¦ã‚¿ã‚¹ã‚¯</h3>
                
                <div style={{ marginBottom: '16px' }}>
                    <input
                        {...register('title')}
                        placeholder="ã‚¿ã‚¤ãƒˆãƒ«"
                        style={{ width: '100%', padding: '8px' }}
                    />
                    {errors.title && <span style={{ color: 'red' }}>{errors.title.message}</span>}
                </div>
                
                <div style={{ marginBottom: '16px' }}>
                    <textarea
                        {...register('description')}
                        placeholder="èª¬æ˜"
                        rows={3}
                        style={{ width: '100%', padding: '8px' }}
                    />
                </div>
                
                <div style={{ display: 'flex', gap: '8px', justifyContent: 'flex-end' }}>
                    <button type="button" onClick={onClose}>ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                    <button type="submit" disabled={mutation.isPending}>
                        {mutation.isPending ? 'ä½œæˆä¸­...' : 'ä½œæˆ'}
                    </button>
                </div>
            </form>
        </div>
    );
}

export default TaskForm;
```

## ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ å®Œäº†ï¼

ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆTypeScript + Reactï¼‰ã®ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ã‚’å®Œäº†ã—ã¾ã—ãŸã€‚

### å­¦ã‚“ã ã“ã¨

1. **TypeScript** - å‹å®‰å…¨ãªé–‹ç™º
2. **React åŸºç¤** - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€Propsã€State
3. **Hooks** - useStateã€useEffect
4. **ãƒ•ã‚©ãƒ¼ãƒ ** - React Hook Formã€Zod
5. **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°** - React Router
6. **çŠ¶æ…‹ç®¡ç†** - Contextã€Zustand
7. **ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ** - TanStack Query

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- **UI ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**: shadcn/uiã€MUI
- **CSS**: Tailwind CSS
- **ãƒ†ã‚¹ãƒˆ**: Vitestã€Testing Library
- **SSR/SSG**: Next.js
